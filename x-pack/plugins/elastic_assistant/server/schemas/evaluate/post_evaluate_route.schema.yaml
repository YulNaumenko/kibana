openapi: 3.0.0
info:
  title: Evaluate API endpoint
  version: '2023-10-31'
paths:
  /internal/elastic_assistant/evaluate:
    get:
      operationId: Evaluate
      x-codegen-enabled: true
      description: Get Elastic Assistant capabilities for the requesting plugin
      summary: Get Elastic Assistant capabilities
      tags:
        - Evaluate API
      parameters:
        - in: query
          name: agents
          required: true
          schema:
            type: string
        - in: query
          name: models
          required: true
          schema:
            type: string
        - in: query
          name: outputIndex
          required: true
          schema:
            type: string
        - in: query
          name: datasetName
          schema:
            type: string
        - in: query
          name: evaluationType
          schema:
            type: string
        - in: query
          name: evalModel
          schema:
            type: string
        - in: query
          name: projectName
          schema:
            type: string
        - in: query
          name: runName
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                dataset:
                  $ref: '#/components/schemas/Dataset'
                evalPrompt:
                  type: string

      responses:
        200:
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  evaluationId:
                    type: number
        400:
          description: Generic Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: number
                  error:
                    type: string
                  message:
                    type: string

components:
  schemas:
    DatasetItem:
      type: object
      required:
        - id
        - reference
      properties:
        id:
          type: string
        input:
          type: string
        reference:
          type: string
        tags:
          type: array
          items:
            type: string
        prediction:
          type: string
    Dataset:
      type: array
      items:
        $ref: '#/components/schemas/DatasetItem'
